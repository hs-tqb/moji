!function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([function(t,e){t.exports=function(t,e,n,a,o){var r,i=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,i=t.default);var c="function"==typeof i?i.options:i;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns),a&&(c._scopeId=a);var u;if(o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):n&&(u=n),u){var d=c.functional,l=d?c.render:c.beforeCreate;d?c.render=function(t,e){return u.call(e),l(t,e)}:c.beforeCreate=l?[].concat(l,u):[u]}return{esModule:r,exports:i,options:c}}},function(t,e,n){"use strict";function a(t){return Array.isArray(t)?t:Array.from(t)}function o(t){return t>9?t.toString():"0"+t}function r(t){var e=void 0;if(/\.js$/i.test(t))(e=document.createElement("script")).async=!0,e.src=t,document.body.appendChild(e);else{var n=document.head.getElementsByTagName("link")[0];(e=document.createElement("link")).rel="stylesheet",e.href=t,document.head.insertBefore(e,n)}return new Promise(function(t){e.onload=t})}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=function(t){return t.getFullYear()+o(t.getMonth()+1)+o(t.getDate())},e.toDate=function(t){return new Date(t.substr(0,4),parseInt(t.substr(4,2))-1,t.substr(6,2))},e.getThresholdCaption=function(t){return t<=5?"毫雨":t<=15?"小雨":t<=25?"中雨":t<=50?"大雨":"暴雨"},e.needFastClick=function(){var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e=navigator.standalone,n=window.matchMedia("(display-mode: standalone)").matches;return t&&(e||n)},e.isString=function(t){return"[object String]"===i.call(t)},e.loadScripts=function(){var t=[r("//static.meathill.com/city-picker/docs/css/tqb-city-picker.min.css"),r("//static.meathill.com/date-picker/docs/css/tqb-date-picker.min.css")],e=[r("//cdn.staticfile.org/vue-router/2.7.0//vue-router.min.js")],n=[r("//static.meathill.com/date-picker/docs/js/tqb-date-picker.min.js"),r("//static.meathill.com/city-picker/docs/js/tqb-city-picker.min.js")];return Promise.all(t.concat(e).concat(n))},e.findFrom=function(){if("searchParams"in URL.prototype)return new URL(location).searchParams.get("from");for(var t=location.search.substr(1).split("&"),e=0,n=t.length;e<n;e++){var o=a(t[e].split("=")),r=o[0],i=o.slice(1);if("from"===r)return i.join("=")}};var i=Object.prototype.toString},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={SET_CITY:"setCity",SET_COUPON:"setCoupon",SET_MOBILE:"setMobile",SET_PAY:"setPay",SET_PRICE:"setPrice",SET_RANGE:"setRange",RESET_PRODUCT_LIST:"resetProductList",SET_SUCCESS:"setSuccess",RESET:"reset"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(9));e.default={initData:function(t){return a.default.ajax("http://m.baotianqi.cn/moji/initData",{data:{merchantId:"30054",cityId:t},dataType:"json"})},checkCoupon:function(t,e){return a.default.ajax("http://m.baotianqi.cn/moji/verifyCoupons",{data:{couponsCode:t,mobile:e,merchantId:"30054"},dataType:"json"})},checkDeal:function(t){return a.default.ajax("http://m.baotianqi.cn/moji/beforFirstStep",{data:{dealCode:t},dataType:"json"})},checkDealAgain:function(t){return a.default.ajax("http://m.baotianqi.cn/moji/beforSecondSteps",{data:{dealCode:t},dataType:"json"})},addDeal:function(t){var e=t.dealCode,n=t.moji_id,o=t.productId,r=t.mobile,i=t.couponCode,s=t.total;return a.default.ajax("http://m.baotianqi.cn/moji/addDeal",{data:{dealCode:e,orderIdMoji:n,productId:o,mobile:r,coupons:i,payFee:s},dataType:"json"})},getContract:function(t,e,n){return a.default.ajax("http://m.baotianqi.cn/moji/getContract",{data:{cityId:t,startTime:e,endTime:n,merchantId:"30054"},dataType:"json"})},fetchRecords:function(){return a.default.ajax("http://m.baotianqi.cn/moji/records",{dataType:"json"})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={FETCH_DEAL:"fetch_deal"}},function(t,e){t.exports=Vue},function(t,e){t.exports=Vuex},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),o=void 0;o=mojiJs(),e.default={getUserId:function(){return new Promise(function(t){o.appUserId({callback:function(e){t(e.data)}})})},getUserInfo:function(){return new Promise(function(t){o.getUsrPic({callback:function(e){t(e.data)}})})},location:function(){return new Promise(function(t){o.getCityList({callback:function(e){t(e)}})}).then(function(t){if(0===t.code||!t.data||0===t.data.length)throw new Error("no position");var e=(0,a.find)(t.data,function(t){return 1===Number(t.is_localtion)||1===Number(t.is_location)});return e?e.city_id:"CN54511"}).catch(function(){return"CN54511"})},locationH5:function(){return"geolocation"in navigator?new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){t(e.coords)},function(t){e(t)},{enableHighAccuracy:!0,maximumAge:3e4,timeout:3e4})}).then(function(t){return new Promise(function(e){o.locationH5({data:{lat:t.latitude,lon:t.longitude},callback:function(t){e(t.data.city_id)}})})}).catch(function(t){return"CN54511"}):"CN54511"},pay:function(t){var e=t.type,n=t.total,a=t.order,r=t.mobile,i=t.user_id,s=t.username;return e=null===e?1:e,s=s||r,new Promise(function(t){o.appPay({data:{type:e,appid:"b7bc8228ffeadb7f879ea4c1ea13eebd",pname:"晴空万里宝",price:n,order:a,userid:i,username:s},callback:function(e){t(e)}})})},share:function(t){var e=t.title,n=t.description,a=t.link;return new Promise(function(t){o.shareDo({data:{app_title:e,app_desc:n,app_link:a,app_img_url:"",app_big_img_url:""},callback:function(e){t(e)}})})},start:function(){return new Promise(function(t,e){o.config({appId:"b7bc8228ffeadb7f879ea4c1ea13eebd"}),o.ready(function(){t()}),o.error(function(t){e(t)})})}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(5)),r=a(n(19)),i=new o.default(r.default).$mount("#modal");e.default=i},function(t,e){t.exports=jQuery},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.find=function(t,e){if(Array.prototype.find)return t.find(e);for(var n=0,a=t.length;n<a;n++)if(e(t[n]))return n;return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},o=function(t){return t&&t.__esModule?t:{default:t}}(n(6));e.default={computed:a({},o.default.mapState(["start","end","city_id","mobile","coupon","couponCode","dealCode","total_days","productId","productList","username","user_id","payMethod"]),o.default.mapGetters(["city","total","product"])),filters:{date:function(t){return t.substr(0,4)+"年"+t.substr(4,2)+"月"+t.substr(6,2)+"日"}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r=function(){function t(t,e){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(n(5)),s=a(n(6)),c=a(n(9)),u=a(n(13)),d=a(n(7)),l=a(n(3)),f=a(n(16)),p=a(n(42)),_=a(n(2)),m=a(n(8)),v=n(1);if(p.default.state.api="http://m.baotianqi.cn/moji/",setTimeout(function(){(0,c.default)("#loading").length&&zhuge.track("init-error")},6e4),(/moji/i.test(navigator.userAgent)?Promise.resolve():Promise.reject("本购买页仅供墨迹天气内嵌使用，正在帮您跳转到常规购买页。")).catch(function(t){throw m.default.popup("error",t),location.href="http://m.baotianqi.cn?merchantid=30054",new Error("Go to normal page")}).then(function(){return Promise.all([(0,v.loadScripts)(),d.default.start().then(d.default.getUserId).then(function(t){return t.sns_id?(p.default.state.user_id=t.sns_id,d.default.getUserInfo()):(p.default.state.user_id=t.user_id,null)}).then(function(t){return t&&(p.default.state.username=t.nick,p.default.state.mobile=t.mobile),d.default.location()}).then(function(t){p.default.state.city_id=t;var e=new Date;return e.setDate(e.getDate()+1),p.default.state.start=(0,v.formatDate)(e),p.default.state.end=(0,v.formatDate)(e),l.default.initData(t)})])}).then(function(t){var e=r(t,2)[1];return p.default.state.city_id=e.defaultCityId,p.default.state.cityList={},p.default.state.cityList[e.defaultCityId]={cnName:e.defaultCityName},e}).then(function(t){var e=new s.default.Store(p.default),n=new VueRouter({base:location.pathname.substr(0,location.pathname.lastIndexOf("/")+1),routes:f.default});e.commit(_.default.RESET_PRODUCT_LIST,t),(0,c.default)("#loading").remove(),new i.default(o({store:e,router:n},u.default)).$mount("#app"),p.default.state.mobile&&zhuge.identify(p.default.state.mobile),zhuge.track("ready",{duration:Date.now()-_load_start,from:"a"})}).catch(function(t){}),(0,v.needFastClick)()){var h=document.createElement("script");h.src="//cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js",h.async=!0,h.onload=function(){FastClick.attach(document.body)},document.body.appendChild(h)}},function(t,e,n){var a=n(0)(n(14),n(15),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\app.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{hasRecordLink:!0,transitionName:""}},watch:{$route:function(t,e){if(this.hasRecordLink=-1!==["homepage","welcome"].indexOf(t.name),"faq"!==t.name)if("faq"!==e.name){var n=["homepage","checkout","receipt"];t=n.indexOf(t.name),e=n.indexOf(e.name),this.transitionName=t<e?"slide-right":"slide-left"}else this.transitionName="fade-out-down";else this.transitionName="fade-in-up"}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.hasRecordLink?"":"no-bg",attrs:{id:"app"}},[t.hasRecordLink?n("header",[n("h1",[t._v("坏天气[保险]")]),t._v(" "),n("p",[t._v("只要下大雨，就有红包拿")])]):t._e(),t._v(" "),n("transition",{attrs:{name:t.transitionName}},[n("router-view")],1),t._v(" "),t.hasRecordLink?n("a",{attrs:{href:"http://m.baotianqi.cn/deal/show_pay",id:"float-link"}},[t._v("我的保障记录")]):t._e()],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(17)),r=a(n(29)),i=a(n(32)),s=a(n(35)),c=a(n(38)),u=[{path:"/",name:"homepage",component:o.default},{path:"/faq",name:"faq",component:s.default},{path:"/checkout",name:"checkout",component:r.default},{path:"/receipt",name:"receipt",component:i.default},{path:"/welcome",name:"welcome",component:c.default}];e.default=u},function(t,e,n){var a=n(0)(n(18),n(28),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\page\\Homepage.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r=a(n(6)),i=n(10),s=a(n(3)),c=a(n(8)),u=a(n(4)),d=a(n(2)),l=n(1),f=["周日","周一","周二","周三","周四","周五","周六"];e.default={template:"#homepage-template",name:"homepage",data:function(){return{isChecking:!1,isSubmitting:!1,product:null}},computed:o({isCouponChecked:function(){return null!==this.coupon},tomorrow:function(){var t=new Date;return t.setDate(t.getDate()+1),(0,l.formatDate)(t)},thisEve:function(){var t=new Date;return t.setMonth(11),t.setDate(27),(0,l.formatDate)(t)}},r.default.mapState(["api","mobile","city_id","coupon","couponCode","dealCode","productList","productId","headerIMG","start","end","total_days","isFetching"]),r.default.mapGetters(["city","total"])),filters:{formatDateLabel:function(t){var e=t.substr(4,2)+"月"+t.substr(6,2)+"日";t=(0,l.toDate)(t);var n=new Date,a="";return a=t.getTime()-n.getTime()<864e5?"明天":t.getTime()-n.getTime()<1728e5?"后天":f[t.getDay()],e+" <small>"+a+"</small>"}},methods:{checkout:function(){var t=this;if(this.productId)if(this.mobile){if(!this.dealCode)return c.default.wait("订单号错误，正在帮您重新申请"),void this.$store.dispatch(u.default.FETCH_DEAL).then(function(){c.default.msg="之前的订单号错误，已帮您重新申请。<br>请检查后重新提交订单。",c.default.timeout=2});s.default.checkDeal(this.dealCode).then(function(e){"1"===e.state?t.$router.push("checkout"):(c.default.wait("您的订单已过期，正在帮您重新申请"),t.$store.dispatch(u.default.FETCH_DEAL).then(function(){c.default.msg="之前的订单已过期，已帮您重新申请。<br>请检查后重新提交订单。",c.default.timeout=2}))}),zhuge.track("checkout",{total:this.total})}else c.default.alert("请正确填写手机号码");else c.default.alert("您还没有选择补贴红包")},onCityChange:function(t){var e=this.$el.querySelector("[for="+t.target.id+"]").textContent;this.$store.commit(d.default.SET_CITY,{id:t.target.value,cityName:e}),this.$store.dispatch(u.default.FETCH_DEAL),zhuge.track("city",{id:t.target.value})},onCouponChange:function(t){var e=this,n=t.target.value;""!==n?this.mobile&&(this.isChecking=!0,s.default.checkCoupon(n,this.mobile).then(function(t){e.isChecking=!1,e.$store.commit(d.default.SET_COUPON,{coupon:t.price,couponCode:n})}),zhuge.track("coupon")):this.isCouponChecked=!1},onDateChange:function(t){var e=t.target.value.split(/\s*~\s*/);this.$store.commit(d.default.SET_RANGE,{start:e[0],end:e[1]}),this.$store.dispatch(u.default.FETCH_DEAL),zhuge.track("date",{start:e[0],end:e[1]})},onMobileChange:function(t){var e=t.target.value.trim();/^1[34578]\d{9}$/.test(t.target.value)?(this.$store.commit(d.default.SET_MOBILE,e),"zhuge"in window&&zhuge.identify(e)):c.default.alert("请填写正确的手机号码")},onSelectProduct:function(t){var e=(0,i.find)(this.productList,function(e){return e.productId===t.target.value});this.$store.commit(d.default.SET_PRICE,{productId:t.target.value,compensateRule:e.compensateRule}),zhuge.track("select",{id:e.productId,price:e.price,compensateRule:e.compensateRule})}}}},function(t,e,n){var a=n(0)(n(20),n(27),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\component\\popup\\RealManager.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});a(n(5));var o=a(n(21)),r=a(n(24)),i=n(1);e.default={components:{Alert:o.default,Paying:r.default},data:function(){return{active:!1,current:null,backdrop:!0,msg:"",timeout:2}},methods:{alert:function(t){this.popup("alert",t)},close:function(){this.current=null,this.active=!1,this.msg="",this.$emit("close")},popup:function(t,e){(0,i.isString)(e)?this.msg=e:this.backdrop=!("backdrop"in e)||e.backdrop,this.current=t,this.active=!0},wait:function(t){this.timeout=0,this.popup("paying",t)},onOK:function(){this.close()},onClickBackdrop:function(){this.backdrop&&this.close()}}}},function(t,e,n){var a=n(0)(n(22),n(23),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\component\\popup\\alert.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"alert",props:["msg"],methods:{confirm:function(){this.$emit("ok")}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-body alert"},[n("div",{staticClass:"icon"}),t._v(" "),n("p",[t._v(t._s(t.msg))]),t._v(" "),n("button",{staticClass:"btn btn-secondary confirm-button",attrs:{type:"button"},on:{click:t.confirm}},[t._v("确定")])])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var a=n(0)(n(25),n(26),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\component\\popup\\paying.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"paying",props:{msg:"",timeout:{type:Number,default:2}},data:function(){return{ready:!1}},computed:{message:function(){return this.msg||(this.ready?"请完成支付。":"正在为您打开支付窗口，请稍候片刻")}},created:function(){var t=this;this.timeout&&setTimeout(function(){t.ready=!0},1e3*this.timeout)},methods:{confirm:function(){this.$emit("ok"),this.ready=!1}},watch:{timeout:function(){this.ready=!0}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-body paying"},[n("p",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),t.ready?n("button",{staticClass:"btn btn-secondary confirm-button",attrs:{type:"button"},on:{click:t.confirm}},[t._v("确定")]):n("p",{staticClass:"text-center"},[n("i",{staticClass:"icon-spinner animate-spin"})])])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal"},[t.active?n("div",{staticClass:"backdrop",on:{click:t.onClickBackdrop}}):t._e(),t._v(" "),n("transition",{attrs:{"enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},["alert"===t.current?n("alert",{attrs:{msg:t.msg},on:{ok:t.onOK}}):t._e(),t._v(" "),"paying"===t.current?n("paying",{attrs:{msg:t.msg,timeout:t.timeout},on:{ok:t.onOK}}):t._e(),t._v(" "),"error"===t.current?n("div",{staticClass:"modal-body"},[n("p",[t._v(t._s(t.msg))]),t._v(" "),n("p",{staticClass:"text-center"},[n("i",{staticClass:"icon-spinner animate-spin"})])]):t._e()],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"homepage"}},[n("form",{attrs:{id:"buy"},on:{submit:function(e){e.preventDefault(),t.checkout(e)}}},[n("div",{staticClass:"form-group"},[n("input",{staticClass:"tqb-city-picker-input",attrs:{name:"city",type:"hidden",id:"city"},on:{change:t.onCityChange}}),t._v(" "),n("label",{staticClass:"tqb-city-picker-label",attrs:{for:"city","data-url":t.api+"getCitys","data-hot":"9",onclick:""}},[t._v(t._s(t.city))])]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"form-group dates"},[n("input",{attrs:{name:"date",type:"hidden",id:"date","data-start":t.tomorrow,"data-end":t.thisEve,"data-range":"30","data-label-filter-start":"{m}月{d}日","data-label-filter-end":"{m}月{d}日","data-format":"yyyymmdd"},domProps:{value:t.start+"~"+t.end},on:{change:t.onDateChange}}),t._v(" "),n("label",{staticClass:"tqb-date-picker-label start",attrs:{for:"date",onclick:""},domProps:{innerHTML:t._s(t.$options.filters.formatDateLabel(t.start))}}),t._v(" "),t._m(1),t._v(" "),n("label",{staticClass:"tqb-date-picker-label end",attrs:{for:"date",onclick:""},domProps:{innerHTML:t._s(t.$options.filters.formatDateLabel(t.end))}}),t._v(" "),n("p",{staticClass:"amount"},[n("small",{staticClass:"text-muted"},[t._v("共"+t._s(t.total_days)+"天")])])]),t._v(" "),t._m(2),t._v(" "),n("div",{staticClass:"form-group hongbao-list"},[t._l(t.productList,function(e,a){return[n("input",{attrs:{type:"radio",name:"product",id:"product-"+e.productId,"data-productId":t.productId},domProps:{value:e.productId,checked:t.productId===e.productId},on:{change:t.onSelectProduct}}),t._v(" "),n("label",{attrs:{for:"product-"+e.productId}},[n("h3",[t._v(t._s(e.caption)+"红包")]),t._v(" "),n("span",{staticClass:"price",domProps:{textContent:t._s(e.compensateRule*t.total_days)}}),t._v(" "),n("p",[t._v("\n            保障期内任意单日"+t._s(e.label)+">"+t._s(e.threshold)+"mm，就发红包 "),n("strong",[t._v("￥"+t._s(e.compensateRule)+"/天")]),n("br"),t._v("\n            所有红包累计金额不超过 "),n("strong",{domProps:{textContent:t._s("￥"+e.compensateRule*t.total_days)}},[t._v("￥")])]),t._v(" "),n("i",{staticClass:"icon-ok"})])]}),t._v(" "),n("p",{staticClass:"help-block text-muted"},[t._v("\n        最终天气实测值以中国气象局"+t._s(t.city)+"气象站（编号"+t._s(t.city_id)+"）为准。保障开始时间为当日0:00，结束时间为23:59\n      ")])],2),t._v(" "),t._m(3),t._v(" "),n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control",attrs:{type:"tel",name:"mobile",placeholder:"您的手机号码，必填~",required:"",id:"mobile",pattern:"^1[34578]\\d{9}$",maxlength:"11"},domProps:{value:t.mobile},on:{change:t.onMobileChange}}),t._v(" "),n("label",{staticClass:"required",attrs:{for:"mobile"}})])]),t._v(" "),t._m(4),t._v(" "),n("footer",{staticClass:"cart"},[n("div",{staticClass:"total"},[t.isFetching?[n("span",{staticClass:"text-muted"},[t._v("计算中...")])]:[t._v("\n        需支付："),n("span",{staticClass:"price"},[t._v(t._s(t.total)+"元")])]],2),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{form:"buy",disabled:t.isFetching||t.isSubmitting}},[t.isSubmitting?n("i",{staticClass:"spinner"}):t._e(),t._v(" 立即支付\n    ")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",[n("i",{staticClass:"calendar"}),t._v(" 选择保障起止日期")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"to"},[n("i",{staticClass:"icon-right-open to"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-help"},[n("h4",[n("i",{staticClass:"envelop"}),t._v(" 选择天气补贴")]),t._v(" "),n("a",{staticClass:"help",attrs:{href:"#/faq"}},[t._v("?")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",{staticClass:"buy-info"},[n("i",{staticClass:"cart"}),t._v(" 购买信息")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"how-to-play"},[n("img",{attrs:{src:"img/intro.jpg"}})])}]},t.exports.render._withStripped=!0},function(t,e,n){var a=n(0)(n(30),n(31),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\page\\Checkout.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(7)),r=a(n(3)),i=a(n(2)),s=a(n(4)),c=a(n(8)),u=a(n(11));n(1);e.default={mixins:[u.default],template:"#checkout-template",data:function(){return{isSubmitting:!1}},methods:{onSubmit:function(t){var e=this;this.isSubmitting||(this.isSubmitting=!0,t.target.classList.contains("weixin")?(zhuge.track("set_pay",{type:"weixin"}),this.$store.commit(i.default.SET_PAY,0)):(zhuge.track("set_pay",{type:"alipay"}),this.$store.commit(i.default.SET_PAY,1)),r.default.checkDealAgain(this.dealCode).then(function(t){if("1"!==t.state)throw c.default.alert(t.msg),e.$store.dispatch(s.default.FETCH_DEAL),new Error("订单已过期");return c.default.popup("paying",{backdrop:!1}),c.default.$once("close",function(){zhuge.track("cancel-pay"),e.isSubmitting=!1}),r.default.addDeal({dealCode:e.dealCode,productId:e.productId,mobile:e.mobile,couponCode:e.couponCode,total:e.total})}).then(function(t){if("1"!==t.state)throw c.default.alert(t.msg),new Error("创建订单失败");return o.default.pay({type:e.payMethod,total:e.total,order:e.dealCode,mobile:e.mobile,username:e.username,user_id:e.user_id})}).then(function(t){if(t.code)return t.order_id_moji;throw new Error("付款失败")}).then(function(t){c.default.close(),e.$store.commit(i.default.SET_SUCCESS,!!t),e.$router.push("receipt")}).catch(function(t){t instanceof Error&&(t=t.name+": "+t.message),e.$store.commit(i.default.RESET,!1),e.$router.push("receipt")}),zhuge.track("pay",{total:this.total}))}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bill",attrs:{id:"checkout"}},[n("dl",{staticClass:"detail"},[n("dt",[t._v("保障城市")]),t._v(" "),n("dd",[t._v(t._s(t.city))]),t._v(" "),n("dt",[t._v("保障开始时间")]),t._v(" "),n("dd",[t._v(t._s(t._f("date")(t.start))+"00:00")]),t._v(" "),n("dt",[t._v("保障结束时间")]),t._v(" "),n("dd",[t._v(t._s(t._f("date")(t.end))+"23:59")]),t._v(" "),n("dt",[t._v("补贴条件")]),t._v(" "),n("dd",[n("p",[t._v("任意单日"+t._s(t.product.label)+">"+t._s(t.product.threshold)+"mm")]),t._v(" "),n("p",[n("small",[t._v("最终天气数据以"+t._s(t.city)+"气象站（编号"+t._s(t.city_id)+"）为准")])])]),t._v(" "),n("dt",[t._v("最大补贴红包")]),t._v(" "),n("dd",[t._v(t._s(t.product.compensateRule*t.total_days)+"元")])]),t._v(" "),n("dl",{staticClass:"count"},[n("dt",[t._v("手机号")]),t._v(" "),n("dd",[n("a",{staticClass:"phone",attrs:{href:"javascript:void(0);"}},[t._v(t._s(t.mobile))])]),t._v(" "),n("dt",[t._v("保障售价")]),t._v(" "),n("dd",{staticClass:"price"},[t._v(t._s(t.product.price/100)+"元")]),t._v(" "),n("dt",[t._v("优惠码")]),t._v(" "),n("dd",{staticClass:"discount"},[t._v("-"+t._s(t.coupon/100)+"元")]),t._v(" "),n("dd",{staticClass:"final"},[t._v("实付："),n("span",{staticClass:"price"},[t._v(t._s(t.total)+"元")])])]),t._v(" "),n("footer",[n("h3",[t._v("请选择支付方式")]),t._v(" "),n("button",{staticClass:"btn btn-block weixin",attrs:{disabled:t.isSubmitting},on:{click:t.onSubmit}},[t._v("微信")]),t._v(" "),n("button",{staticClass:"btn btn-block alipay",attrs:{disabled:t.isSubmitting},on:{click:t.onSubmit}},[t._v("支付宝")])])])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var a=n(0)(n(33),n(34),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\page\\Receipt.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(7)),r=a(n(11)),i=a(n(4)),s=a(n(2));e.default={mixins:[r.default],computed:Vuex.mapState(["paySuccess"]),created:function(){zhuge.track("result",{success:this.paySuccess})},template:"#receipt-template",methods:{share:function(){var t=this;o.default.share({title:"晴空天气宝，不怕坏天气",description:"担心坏天气？快来领天气现金补贴！天很热、下大雨统统都赔！",link:"http://m.baotianqi.cn"}).then(function(e){if(1!==e.code)throw new Error("分享时发生错误："+e.msg);t.$store.dispatch(i.default.FETCH_DEAL),t.$router.push("/")}).catch(function(t){t instanceof Error&&(t=t.message),alert("分享时发生错误："+t)})},restart:function(){this.$store.dispatch(i.default.FETCH_DEAL),this.$store.commit(s.default.RESET)}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bill",attrs:{id:"receipt"}},[n("header",[t.paySuccess?[t._m(0),t._v(" "),n("p",{staticClass:"lead"},[t._v("手机号码："+t._s(t.mobile))]),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"btn-group"},[n("a",{staticClass:"btn btn-primary",attrs:{href:"#/"},on:{click:t.restart}},[t._v("再次购买")]),t._v(" "),n("a",{staticClass:"btn btn-primary share-button",attrs:{href:"#/"},on:{click:function(e){e.preventDefault(),t.share(e)}}},[t._v("分享")])])]:[t._m(2),t._v(" "),n("p",{staticClass:"lead"},[t._v("用户取消购买或支付失败")]),t._v(" "),n("p",[n("a",{staticClass:"btn btn-primary btn-block",attrs:{href:"#/"},on:{click:t.restart}},[t._v("再次购买")])])]],2),t._v(" "),n("div",{staticClass:"bar"}),t._v(" "),n("dl",[n("dt",[t._v("保障城市")]),t._v(" "),n("dd",[t._v(t._s(t.city))]),t._v(" "),n("dt",[t._v("保障开始时间")]),t._v(" "),n("dd",[t._v(t._s(t._f("date")(t.start))+"00:00")]),t._v(" "),n("dt",[t._v("保障结束时间")]),t._v(" "),n("dd",[t._v(t._s(t._f("date")(t.end))+"23:59")]),t._v(" "),n("dt",[t._v("订单金额")]),t._v(" "),n("dd",[t._v(t._s(t.total)+"元")]),t._v(" "),n("dt",[t._v("保障金额")]),t._v(" "),n("dd",[t._v("每日赔付"+t._s(t.product.compensateRule)+"元，共计"+t._s(t.total_days*t.product.compensateRule)+"元")]),t._v(" "),n("dt",[t._v("补贴条件")]),t._v(" "),n("dd",[t._v("任意单日"+t._s(t.product.label)+">"+t._s(t.product.threshold)+"mm")]),t._v(" "),n("dt",[t._v("手机号")]),t._v(" "),n("dd",[n("a",{staticClass:"phone",attrs:{href:"javascript:void(0);"}},[t._v(t._s(t.mobile))])]),t._v(" "),n("dt",[t._v("站点信息")]),t._v(" "),n("dd",[t._v("以"+t._s(t.city)+"气象站（编号"+t._s(t.city_id)+"）为准")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"success"},[n("i",{staticClass:"icon-ok-circled2"}),t._v(" 购买成功")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("span",{staticClass:"red"},[t._v("重要！请一定关注天气宝微信号（tianqibao2015)，")]),t._v("才能领取\n        天气补贴红包，红包将在保障期结束后，通过微信自动转给联系人\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"error"},[n("i",{staticClass:"icon-cancel-circled-outline"}),t._v(" 购买失败")])}]},t.exports.render._withStripped=!0},function(t,e,n){var a=n(0)(n(36),n(37),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\page\\Faq.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"faq"}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"faq"}},[n("header",[n("a",{attrs:{href:"#/"}},[n("i",{staticClass:"icon-right-open"})]),t._v(" "),n("h3",[t._v("常见问题")])]),t._v(" "),n("dl",[n("dt",[t._v("赔付方式是什么？")]),t._v(" "),n("dd",[t._v("天气宝目前仅支持微信零钱转账的方式进行赔付。赔付前，需要您在微信中绑定您的手机号。")]),t._v(" "),n("dt",[t._v("怎么绑定账户？")]),t._v(" "),n("dd",[t._v("关注天气宝微信服务号（tianqibao2015），在菜单中选择“绑定”，验证手机号通过后，即完成绑定。")]),t._v(" "),n("dt",[t._v("不同天气的触发标准会变动吗？")]),t._v(" "),n("dd",[t._v("是的，随着天气的变化，触发标准也会出现变动。")]),t._v(" "),n("dt",[t._v("我什么时候会知道购买的合约是否触发？")]),t._v(" "),n("dd",[t._v("您购买的合约约定期限结束时，我们将发送中央气象台发布的合约约定的保障地区天气实测值到您的微信账号（如果没有关注天气宝微信号，则将通过短信通知您）。"),n("br"),t._v("\n      由于气象台公布数据有一定的时间延迟，我们获得天气数据后将于3个工作日内判定合约是否触发。")]),t._v(" "),n("dt",[t._v("我认为你们的数据不太对，我在天气预报上看到的不是这个？")]),t._v(" "),n("dd",[t._v("天气指数的判定，以国家气象局发布的该气象站点的天气指标实测值为准，该指标可在中央气象台网站（http://www.nmc.cn）通过5位站点编号查询。具体细则，请参考"),n("a",{attrs:{href:"http://m.baotianqi.cn/help/protect_agreement"}},[t._v("《天气宝用户服务协议》")]),t._v("。")]),t._v(" "),n("dt",[t._v("怎么查询我购买的合约？")]),t._v(" "),n("dd",[t._v("在天气宝微信服务号中，您能查询到您购买的所有合约。")]),t._v(" "),n("dt",[t._v("购买后，我想退订单可不可以？")]),t._v(" "),n("dd",[t._v("确认下单并支付成功的订单，目前无法退订。")])]),t._v(" "),n("h3",[t._v("规则详情")]),t._v(" "),n("ol",[n("li",[t._v("保障日期下（内）对应天气指标，如果实际值达到指标要求，即可获得赔付")]),t._v(" "),n("li",[t._v("温度的统计周期为当日0：00至当日23：59")]),t._v(" "),n("li",[t._v("降水的统计周期为当日0：00至当日23：59")]),t._v(" "),n("li",[t._v("天气指标实际值以中国气象局发布的投保城市的国家级标准站数据为准")]),t._v(" "),n("li",[t._v("每个城市或者地区的天气指标以该地区特定的气象观测站的观测值为准，详见"),n("a",{attrs:{href:"http://m.baotianqi.cn/to/protect_cityMassage"}},[t._v("《城市和气象站点列表》")])])]),t._v(" "),n("p",{staticClass:"text-center"},[n("small",{staticClass:"text-muted"},[t._v("当前版本：${version}")])])])}]},t.exports.render._withStripped=!0},function(t,e,n){var a=n(0)(n(39),n(41),null,null,null);a.options.__file="C:\\Users\\meathill\\WebstormProjects\\tqb-moji\\app\\page\\Welcome.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),a.options.functional,t.exports=a.exports},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});a(n(3));var o=a(n(40));e.default={name:"welcome",computed:{message:function(){return this.records[this.current]}},data:function(){return{records:null,current:0}},methods:{onAnimationEnd:function(t){"fadeInUp"===t.animationName?(t.target.classList.remove("fadeInUp"),setTimeout(function(){t.target.classList.add("fadeOutDown")},2e3)):"fadeOutDown"===t.animationName&&(this.current<this.records.length-1?this.current+=1:this.current+=0,t.target.classList.remove("fadeOutDown"),t.target.classList.add("fadeInUp"))}},mounted:function(){this.records=o.default.map(function(t){return{mobile:t[0],compensateRule:t[2],city:t[1],caption:t[3]}})}}},function(t,e){t.exports=[["15167755895","苏州","20","降雨"],["15167755895","嘉兴","20","降雨"],["15167755895","杭州","20","降雨"],["15195900575","上海","20","降雨"],["15011604014","西宁","20","降雨"],["13132921345","苏州","10","降雨"],["13921032921","苏州","10","降雨"],["13991546110","渭南","10","降雨"],["13961202588","常州","20","降雨"],["13700407083","海口","10","降雨"],["15600152635","吕梁","10","降雨"],["15011604014","开封市","20","降雨"],["13991546110","延安","10","降雨"],["15195900575","延安","20","降雨"],["15084868986","合肥","20","降雨"],["17855833617","湖州","20","降雨"],["18531577132","金华","10","降雨"],["15167755895","杭州","20","降雨"],["13219088675","合肥","10","降雨"],["15600152635","营口","10","降雨"],["17640431579","桂林","20","降雨"],["17687311275","桂林","20","降雨"],["13377090687","桂林","20","降雨"],["13377090675","桂林","20","降雨"],["18340359703","桂林","20","降雨"],["13700407083","海口","10","降雨"],["15600152635","鞍山","10","降雨"],["13219088675","常州","10","降雨"],["15063156500","威海","10","降雨"],["15063156500","威海","10","降雨"],["18391364806","大连","10","降雨"],["15167755895","铜仁","20","降雨"],["15060255627","铜仁","20","降雨"],["13559619162","铜仁","20","降雨"],["15160584216","铜仁","20","降雨"],["17687311275","朝阳","20","降雨"],["13377090687","朝阳","20","降雨"],["17640431579","朝阳","20","降雨"],["13377090675","朝阳","20","降雨"],["17687311275","常德","20","降雨"],["13377090687","常德","20","降雨"],["13377090675","常德","20","降雨"],["18340359703","岳阳","20","降雨"],["13572990876","渭南","20","降雨"],["13880214477","秦皇岛","10","降雨"],["15829584231","渭南","10","降雨"],["18666130563","佛山","20","降雨"],["15985887529","秦皇岛","10","降雨"],["18823148866","贵阳","20","降雨"],["15011604014","贵阳","20","降雨"],["18823148866","重庆","20","降雨"],["15011604014","重庆","20","降雨"],["18857877965","烟台","10","降雨"],["13477021145","武汉","10","降雨"],["15600152635","大连","10","降雨"],["18857877965","黄石","10","降雨"],["15927083207","荆州","20","降雨"],["18857877965","常德","10","降雨"],["18857877965","武汉","10","降雨"],["18857877965","南京","10","降雨"],["18316274476","海口","20","降雨"],["15257883677","宁波","10","降雨"],["15600152635","九江","10","降雨"],["13531974497","合肥","10","降雨"],["13706924178","信阳市","20","降雨"],["13559619162","信阳市","20","降雨"],["15160584216","信阳市","20","降雨"],["15060255627","信阳市","20","降雨"],["15600152635","景德镇","10","降雨"],["13880214477","驻马店市","10","降雨"],["15891047096","驻马店市","10","降雨"],["13991546110","驻马店市","10","降雨"],["13309130151","驻马店市","10","降雨"],["13572990876","渭南","20","降雨"],["15829584231","渭南","10","降雨"],["18991943850","渭南","10","降雨"],["18476214731","佛山","20","降雨"],["18340359703","西宁","20","降雨"],["17687311275","西宁","20","降雨"],["13377090687","西宁","20","降雨"],["17640431579","西宁","20","降雨"],["13377090675","西宁","20","降雨"],["15011604014","宝鸡","20","降雨"],["18823148866","宝鸡","20","降雨"],["15889835471","佛山","10","降雨"],["18819227539","佛山","20","降雨"],["15600152635","通化","10","降雨"],["15986623527","南京","10","降雨"],["18316274476","海口","20","降雨"],["13961680419","宝鸡","10","降雨"],["18316274476","湛江","20","降雨"],["13774764672","西安","20","降雨"],["15171797571","西安","10","降雨"],["17640431579","丹东","10","降雨"],["13377090687","丹东","20","降雨"],["17687311275","丹东","20","降雨"],["13377090675","丹东","20","降雨"],["18340359703","丹东","20","降雨"],["18476214731","阳江","20","降雨"],["18819252452","湛江","20","降雨"],["15914953084","阳江","20","降雨"]]},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"welcome"}},[n("header",[t.records?n("p",{staticClass:"animated fadeInUp",on:{animationend:t.onAnimationEnd}},[t._v(t._s(t.message.mobile)+"领取"),n("br"),t._v(t._s(t.message.compensateRule)+"元"+t._s(t.message.city)+t._s(t.message.caption)+"红包")]):t._e()]),t._v(" "),t._m(0),t._v(" "),n("footer",[t._v("\n    Powered by  天气宝（微信搜索：天气宝）\n  ")])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("ul",[n("li",[t._v("\n        下大雨就有红包20元\n        "),n("small",[t._v("微信自动发红包，真金白银")])]),t._v(" "),n("li",[t._v("\n        0.8元起购，多买多赔\n        "),n("small",[t._v("支持全国120+城市和热门景区")])]),t._v(" "),n("li",[t._v("\n        自选时间，最快明天起保\n        "),n("small",[t._v("最长保障一个月，安心等待红包")])]),t._v(" "),n("li",[t._v("\n        气象局权威数据自动判定\n        "),n("small",[t._v("最快次日出结果，数据公开可查")])])]),t._v(" "),n("a",{staticClass:"btn btn-block",attrs:{href:"#/"}},[t._v("立即购买")])])}]},t.exports.render._withStripped=!0},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(43)),r=a(n(44));e.default={state:{coupon:null,couponCode:"",dealCode:null,mobile:null,start:"",end:"",productId:null,productList:null,compensateRule:0,total_days:1,paySuccess:!0,isFetching:!1,payMethod:1},actions:r.default,mutations:o.default,getters:{city:function(t){var e=t.cityList[t.city_id];return e?e.cnName:"无此城市"},product:function(t){var e=t.productId;return e?t.productList.find(function(t){return t.productId===e}):t.productList[0]},total:function(t){var e=t.productList.find(function(e){return e.productId===t.productId}),n=(e?e.price:0)-t.coupon;return n>0?n/100:0}}}},function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(1);e.default=(o={},a(o,r.default.SET_CITY,function(t,e){var n=e.id,a=e.cityName;t.city_id=n,t.cityList[n]={cnName:a}}),a(o,r.default.SET_COUPON,function(t,e){var n=e.coupon,a=e.couponCode;t.coupon=100*n,t.couponCode=a}),a(o,r.default.SET_MOBILE,function(t,e){t.mobile=e}),a(o,r.default.SET_PAY,function(t,e){t.payMethod=e}),a(o,r.default.SET_PRICE,function(t,e){var n=e.productId,a=e.compensateRule;t.productId=n,t.compensateRule=a}),a(o,r.default.SET_RANGE,function(t,e){var n=e.start,a=e.end;t.start=n,t.end=a,n=(0,i.toDate)(n),a=(0,i.toDate)(a,1),t.total_days=Math.ceil((a.getTime()-n.getTime())/864e5)+1}),a(o,r.default.RESET_PRODUCT_LIST,function(t,e){var n=e.products.reduce(function(t,e){return t[e.productId]=e,t},{}),a=("productList"in e?e.productList:t.productList).map(function(e){var a=e.productId;return e.productName.indexOf("雨")&&(e.label="累计降水量"),e.threshold=n[a].threshold,e.caption=(0,i.getThresholdCaption)(n[a].threshold),e.price=Math.round(100*n[a].price),t.productId===a&&(t.price=e.price),e});1===a.length&&(t.productId=a[0].productId),Vue.set(t,"productList",a),t.dealCode=e.dealCode,t.isFetching=!1}),a(o,r.default.SET_SUCCESS,function(t,e){t.paySuccess=e}),a(o,r.default.RESET,function(t){t.price=0,t.dealCode=t.moji_id=t.coupon=t.couponCode=t.productId=null}),o)},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(4)),r=a(n(2)),i=a(n(3)),s=n(1);e.default=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},o.default.FETCH_DEAL,function(t){var e=t.commit,n=t.state;n.isFetching=!0;var a=(0,s.toDate)(n.end);return a.setDate(a.getDate()+1),a=(0,s.formatDate)(a),i.default.getContract(n.city_id,n.start,a).then(function(t){e(r.default.RESET_PRODUCT_LIST,t)})})}]);